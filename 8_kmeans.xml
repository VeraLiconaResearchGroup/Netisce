<tool id="netisce8" name="Netisce Step 8" version="0.1.0" python_template_version="3.5.0">
<description>This tool computes the optimal k value using Elbow and Silhouette Metric and clusters the attractors generated from experimental data and random initial states to the k clusters </description>

    <requirements>
        <requirement type="package" version="1.1.5">pandas</requirement>
        <requirement type="package" version="1.7.3">scipy</requirement>
        <requirement type="package" version="3.0.1">matplotlib</requirement>
        <requirement type="package" version="3.0.1">matplotlib.pyplot</requirement>
        <requirement type="package" version="1.0.1">sklearn.decomposition</requirement>
        <requirement type="package" version="1.19.5">numpy</requirement>
        <requirement type="package" version="1.0.1">sklearn.datasets</requirement>
        <requirement type="package" version="1.0.1">sklearn.cluster</requirement>
        <requirement type="package" version="1.3.0">yellowbrick.cluster.elbow</requirement>
        <requirement type="package" version="3.5.0">sys</requirement>
        <requirement type="package" version="3.5.0">os</requirement>
    </requirements>
    
    <command> python3 '$__tool_directory__/bin/kmeans_full.py' '$experimental_attractors','$random_attractors'</command>

    <inputs>
        <param name="experimental_attractors" type="data" format="tabular" label="Attractors Generated from Experimental Samples"/>
        <param name="random_attractors" type="data" format="tabular" label="Attractors Generated from Randomly generated initial states."/>
    </inputs>

    <outputs>
        <data name="output1" format="png" from_work_dir="elbow.png" label="Elbow Metric Plot"/>
        <data name="output2" format="png" from_work_dir="silhouette.png" label="Silhouette Metric Plot"/>
        <data name="output3" format="txt" from_work_dir="kmeans.txt" label="K-means clustering of attractors"/>
    </outputs>

    <tests>
        <test>
            <param name="datasets" value="attrs_exp.tsv,attrs_insilico.tsv"/>
            <output name="output1" value="elbow.png" ftype="png" />
            <output name="output2" value="silhouette.png" ftype="png" />
            <output name="output3" value="kmeans.txt" ftype="txt" />
        </test>
    </tests>

    <help>
    This tool computes the optimal k value using Elbow and Silhouette Metric and clusters the attractors generated from experimental data and random initial states to the k clusters.
    Required Inputs:
    1. Experimental Attractors of all samples of interest, Insilico Attractors of all samples of interest
    </help>

</tool>